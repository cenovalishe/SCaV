/**
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 * FILE MANIFEST: lib/nightCycleConfig.ts
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 *
 * PURPOSE: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –Ω–æ—á–µ–π –∏ AI —É—Ä–æ–≤–Ω–µ–π –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤
 *          –†–µ–∞–ª–∏–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–∫ –≤ Five Nights at Freddy's 1
 *
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 * –¢–ê–ô–ú–ò–ù–ì–ò:
 * - –û–±—â–∏–π —Ü–∏–∫–ª: 10 —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—É—Ç–æ–∫
 * - 1 –Ω–æ—á—å: 2 —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—É—Ç–æ–∫ (48 —á–∞—Å–æ–≤)
 * - 1 —á–∞—Å AM: 8 —Ä–µ–∞–ª—å–Ω—ã—Ö —á–∞—Å–æ–≤
 * - –ü–µ—Ä–µ—Ö–æ–¥—ã: 1 AM ‚Üí 2 AM ‚Üí 3 AM ‚Üí 4 AM ‚Üí 5 AM ‚Üí 6 AM ‚Üí —Å–ª–µ–¥—É—é—â–∞—è –Ω–æ—á—å
 *
 * AI –£–†–û–í–ù–ò (FNAF1-style):
 * - 0: –ê–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω
 * - 1-5: –ù–∏–∑–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
 * - 6-10: –°—Ä–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
 * - 11-15: –í—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
 * - 16-20: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
 *
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 * LAST MODIFIED: 2026-01-01 | VERSION: 1.0.0
 * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
 */

import { NightConfig, NightCycleTimings, GlobalNightCycle } from './types';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –¢–ê–ô–ú–ò–ù–ì–ò –ì–õ–û–ë–ê–õ–¨–ù–û–ì–û –¶–ò–ö–õ–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
const HOUR_MS = 60 * 60 * 1000;           // 1 —á–∞—Å = 3,600,000 –º—Å
const DAY_MS = 24 * HOUR_MS;              // 1 —Å—É—Ç–∫–∏ = 86,400,000 –º—Å

export const NIGHT_CYCLE_TIMINGS: NightCycleTimings = {
  totalDurationMs: 10 * DAY_MS,           // 10 —Å—É—Ç–æ–∫ = 864,000,000 –º—Å
  nightDurationMs: 2 * DAY_MS,            // 2 —Å—É—Ç–æ–∫ = 172,800,000 –º—Å
  hourDurationMs: 8 * HOUR_MS,            // 8 —á–∞—Å–æ–≤ = 28,800,000 –º—Å
};

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
export const TOTAL_NIGHTS = 5;
export const HOURS_PER_NIGHT = 6;
export const FIRST_HOUR = 1;
export const LAST_HOUR = 6;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ù–ê–ß–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ì–õ–û–ë–ê–õ–¨–ù–û–ì–û –¶–ò–ö–õ–ê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

export const INITIAL_NIGHT_CYCLE: GlobalNightCycle = {
  isActive: false,
  startedAt: null,
  currentNight: 1,
  currentHour: 1,
  timerEndAt: null,
  lastHourUpdateAt: null,
  lastNightUpdateAt: null,
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø AI –£–†–û–í–ù–ï–ô –ü–û –ù–û–ß–ê–ú (FNAF1-style)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
//
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞: aiLevelByHour = [1AM, 2AM, 3AM, 4AM, 5AM, 6AM]
// startHour: —Å –∫–∞–∫–æ–≥–æ —á–∞—Å–∞ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è (0 = –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω —ç—Ç—É –Ω–æ—á—å)
//
// FNAF1 –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
// - Bonnie –∏ Chica –∞–∫—Ç–∏–≤–Ω—ã —Å 1 –Ω–æ—á–∏
// - Foxy –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ 2 –Ω–æ—á–∏
// - Freddy —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º —Å 3 –Ω–æ—á–∏
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

export const NIGHT_CONFIGS: NightConfig[] = [
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // –ù–û–ß–¨ 1 - –û–±—É—á–µ–Ω–∏–µ
  // –¢–æ–ª—å–∫–æ Bonnie –∏ Chica —Å–ª–∞–±–æ –∞–∫—Ç–∏–≤–Ω—ã
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  {
    night: 1,
    animatronics: {
      freddy: {
        startHour: 0,  // –ù–µ–∞–∫—Ç–∏–≤–µ–Ω
        aiLevelByHour: [0, 0, 0, 0, 0, 0],  // –ù–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–æ–æ–±—â–µ
      },
      bonnie: {
        startHour: 2,  // –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å 2 AM
        aiLevelByHour: [0, 2, 3, 4, 5, 5],  // –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—Ç—ë—Ç
      },
      chica: {
        startHour: 3,  // –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å 3 AM
        aiLevelByHour: [0, 0, 2, 3, 4, 4],
      },
      foxy: {
        startHour: 0,  // –ù–µ–∞–∫—Ç–∏–≤–µ–Ω
        aiLevelByHour: [0, 0, 0, 0, 0, 0],
      },
    },
  },

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // –ù–û–ß–¨ 2 - –ù–∞—Ä–∞—Å—Ç–∞–Ω–∏–µ
  // Bonnie –∏ Chica –±–æ–ª–µ–µ –∞–∫—Ç–∏–≤–Ω—ã, Foxy –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  {
    night: 2,
    animatronics: {
      freddy: {
        startHour: 5,  // –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ 5-6 AM
        aiLevelByHour: [0, 0, 0, 0, 1, 2],
      },
      bonnie: {
        startHour: 1,  // –ê–∫—Ç–∏–≤–µ–Ω —Å –Ω–∞—á–∞–ª–∞
        aiLevelByHour: [2, 4, 5, 6, 7, 7],
      },
      chica: {
        startHour: 2,  // –° 2 AM
        aiLevelByHour: [0, 3, 4, 5, 6, 6],
      },
      foxy: {
        startHour: 3,  // –° 3 AM
        aiLevelByHour: [0, 0, 2, 4, 5, 5],
      },
    },
  },

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // –ù–û–ß–¨ 3 - –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  // –í—Å–µ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã, Freddy –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  {
    night: 3,
    animatronics: {
      freddy: {
        startHour: 2,  // –° 2 AM
        aiLevelByHour: [0, 2, 4, 6, 7, 8],
      },
      bonnie: {
        startHour: 1,
        aiLevelByHour: [4, 6, 7, 8, 9, 10],
      },
      chica: {
        startHour: 1,
        aiLevelByHour: [3, 5, 6, 7, 8, 9],
      },
      foxy: {
        startHour: 2,
        aiLevelByHour: [0, 4, 6, 8, 9, 10],
      },
    },
  },

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // –ù–û–ß–¨ 4 - –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  // –í—Å–µ –æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã, Foxy –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  {
    night: 4,
    animatronics: {
      freddy: {
        startHour: 1,
        aiLevelByHour: [3, 5, 7, 9, 11, 12],
      },
      bonnie: {
        startHour: 1,
        aiLevelByHour: [6, 8, 10, 12, 13, 14],
      },
      chica: {
        startHour: 1,
        aiLevelByHour: [5, 7, 9, 11, 12, 13],
      },
      foxy: {
        startHour: 1,
        aiLevelByHour: [5, 8, 10, 12, 14, 15],  // –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π
      },
    },
  },

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // –ù–û–ß–¨ 5 - –ö–æ—à–º–∞—Ä (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å)
  // –í—Å–µ –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ, –≤–∫–ª—é—á–∞—è Freddy
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  {
    night: 5,
    animatronics: {
      freddy: {
        startHour: 1,
        aiLevelByHour: [6, 10, 12, 14, 16, 18],  // Freddy —Ç–µ–ø–µ—Ä—å –æ—á–µ–Ω—å –æ–ø–∞—Å–µ–Ω
      },
      bonnie: {
        startHour: 1,
        aiLevelByHour: [10, 12, 14, 16, 17, 18],
      },
      chica: {
        startHour: 1,
        aiLevelByHour: [8, 11, 13, 15, 16, 17],
      },
      foxy: {
        startHour: 1,
        aiLevelByHour: [10, 13, 15, 17, 18, 20],  // Foxy –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ
      },
    },
  },
];

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

/**
 * –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é AI –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ—á–∏
 */
export function getNightConfig(night: number): NightConfig | undefined {
  return NIGHT_CONFIGS.find((config) => config.night === night);
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å AI —É—Ä–æ–≤–µ–Ω—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∞ –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–π –Ω–æ—á–∏ –∏ —á–∞—Å–∞
 * @param animatronicId - ID –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–∞ (freddy, bonnie, chica, foxy)
 * @param night - –ù–æ–º–µ—Ä –Ω–æ—á–∏ (1-5)
 * @param hour - –¢–µ–∫—É—â–∏–π —á–∞—Å (1-6)
 * @returns AI level (0-20) –∏–ª–∏ 0 –µ—Å–ª–∏ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
 */
export function getAnimatronicAILevel(
  animatronicId: string,
  night: number,
  hour: number
): number {
  const nightConfig = getNightConfig(night);
  if (!nightConfig) return 0;

  const animConfig = nightConfig.animatronics[animatronicId];
  if (!animConfig) return 0;

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫ –Ω–∞ —ç—Ç–æ–º —á–∞—Å–µ
  if (animConfig.startHour === 0 || hour < animConfig.startHour) {
    return 0;
  }

  // –ò–Ω–¥–µ–∫—Å –≤ –º–∞—Å—Å–∏–≤–µ (hour 1 = index 0, hour 2 = index 1, –∏ —Ç.–¥.)
  const hourIndex = hour - 1;
  return animConfig.aiLevelByHour[hourIndex] || 0;
}

/**
 * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫ –Ω–∞ –∑–∞–¥–∞–Ω–Ω–æ–π –Ω–æ—á–∏ –∏ —á–∞—Å–µ
 */
export function isAnimatronicActive(
  animatronicId: string,
  night: number,
  hour: number
): boolean {
  return getAnimatronicAILevel(animatronicId, night, hour) > 0;
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ AI —É—Ä–æ–≤–Ω–∏ –¥–ª—è –≤—Å–µ—Ö –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤ –Ω–∞ —Ç–µ–∫—É—â–µ–π –Ω–æ—á–∏ –∏ —á–∞—Å–µ
 */
export function getAllAnimatronicAILevels(
  night: number,
  hour: number
): Record<string, number> {
  const animatronicIds = ['freddy', 'bonnie', 'chica', 'foxy'];
  const result: Record<string, number> = {};

  for (const id of animatronicIds) {
    result[id] = getAnimatronicAILevel(id, night, hour);
  }

  return result;
}

/**
 * –í—ã—á–∏—Å–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é –Ω–æ—á—å –∏ —á–∞—Å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ —Å –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞
 * @param elapsedMs - –ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è —Å –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
 * @returns { night, hour } –∏–ª–∏ null –µ—Å–ª–∏ —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω
 */
export function calculateNightAndHour(elapsedMs: number): { night: number; hour: number } | null {
  // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏, —á–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ–≥–æ —Ü–∏–∫–ª–∞
  if (elapsedMs >= NIGHT_CYCLE_TIMINGS.totalDurationMs) {
    return null; // –¶–∏–∫–ª –∑–∞–≤–µ—Ä—à—ë–Ω
  }

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é –Ω–æ—á—å
  const night = Math.floor(elapsedMs / NIGHT_CYCLE_TIMINGS.nightDurationMs) + 1;

  // –í—Ä–µ–º—è –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—É—â–µ–π –Ω–æ—á–∏
  const timeInCurrentNight = elapsedMs % NIGHT_CYCLE_TIMINGS.nightDurationMs;

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–∏–π —á–∞—Å (1-6)
  const hour = Math.min(
    LAST_HOUR,
    Math.floor(timeInCurrentNight / NIGHT_CYCLE_TIMINGS.hourDurationMs) + 1
  );

  return { night, hour };
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —á–∞—Å–∞
 * @param elapsedMs - –ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è —Å –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞
 * @returns –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —á–∞—Å–∞
 */
export function getTimeUntilNextHour(elapsedMs: number): number {
  const timeInCurrentHour = elapsedMs % NIGHT_CYCLE_TIMINGS.hourDurationMs;
  return NIGHT_CYCLE_TIMINGS.hourDurationMs - timeInCurrentHour;
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–æ—á–∏
 * @param elapsedMs - –ü—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è —Å –Ω–∞—á–∞–ª–∞ —Ü–∏–∫–ª–∞
 * @returns –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–æ—á–∏
 */
export function getTimeUntilNextNight(elapsedMs: number): number {
  const timeInCurrentNight = elapsedMs % NIGHT_CYCLE_TIMINGS.nightDurationMs;
  return NIGHT_CYCLE_TIMINGS.nightDurationMs - timeInCurrentNight;
}

/**
 * –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è –≤ —á–∏—Ç–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç
 * @param ms - –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
 * @returns –°—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ "X–¥ X—á X–º X—Å"
 */
export function formatTime(ms: number): string {
  if (ms <= 0) return '0—Å';

  const seconds = Math.floor((ms / 1000) % 60);
  const minutes = Math.floor((ms / (1000 * 60)) % 60);
  const hours = Math.floor((ms / (1000 * 60 * 60)) % 24);
  const days = Math.floor(ms / (1000 * 60 * 60 * 24));

  const parts: string[] = [];
  if (days > 0) parts.push(`${days}–¥`);
  if (hours > 0) parts.push(`${hours}—á`);
  if (minutes > 0) parts.push(`${minutes}–º`);
  if (seconds > 0 || parts.length === 0) parts.push(`${seconds}—Å`);

  return parts.join(' ');
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è UI
 */
export function getNightCycleStatusText(cycle: GlobalNightCycle): string {
  if (!cycle.isActive) {
    return '–û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã...';
  }

  return `–ù–æ—á—å ${cycle.currentNight}/5 | ${cycle.currentHour} AM`;
}

/**
 * –ù–∞–∑–≤–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
 */
export const ANIMATRONIC_NAMES_RU: Record<string, string> = {
  freddy: '–§—Ä–µ–¥–¥–∏',
  bonnie: '–ë–æ–Ω–Ω–∏',
  chica: '–ß–∏–∫–∞',
  foxy: '–§–æ–∫—Å–∏',
};

/**
 * –¶–≤–µ—Ç–∞ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤ –¥–ª—è UI
 */
export const ANIMATRONIC_COLORS: Record<string, string> = {
  freddy: '#8B4513',  // –ö–æ—Ä–∏—á–Ω–µ–≤—ã–π
  bonnie: '#4169E1',  // –°–∏–Ω–∏–π
  chica: '#FFD700',   // –ñ—ë–ª—Ç—ã–π
  foxy: '#DC143C',    // –ö—Ä–∞—Å–Ω—ã–π
};

/**
 * –≠–º–æ–¥–∑–∏ –∞–Ω–∏–º–∞—Ç—Ä–æ–Ω–∏–∫–æ–≤
 */
export const ANIMATRONIC_EMOJI: Record<string, string> = {
  freddy: 'üêª',
  bonnie: 'üê∞',
  chica: 'üê§',
  foxy: 'ü¶ä',
};
